<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>对象拷贝</title>
</head>
<body>
<!--<script>
  // 浅拷贝
  const person = {
    name: 'zhangsan',
    age: 44,
    job: 'code'
  };

  copy(person, person2);
//  const person2 = {...person};
//  const person2 = Object.assign({}, person);
  console.log('aaa', person2);
  function copy(source, target) {
    for(const attr in source) {
      target[attr] = source[attr];
    }
  }
</script>-->


<!--
<script>
  // 浅拷贝不适和引用类型的成员
  const person = {
    name: 'zhangsan',
    age: 44,
    job: 'code',
    hobby: ['sleep', 'eat']
  };

  // person和person2的hobby属性共用一份内存（引用地址是相同的）
  const person2 = { ...person };
//  console.log(person2);
  person2.hobby.push('chedan');
  console.log(person);
  console.log('person2', person2);
</script>-->


<script>
  // 深拷贝
  const person = {
    name: 'zhangsan',
    age: 44,
    job: 'code',
    hobby: ['sleep', 'eat'],
    dog: {
      type: '田园',
      age: 0.5,
      price: 0
    }
  };

  const person2 = {};
  deepCopy(person, person2);
//  console.log(person2);
  person2.hobby.push('chedan');
  console.log(person);
  console.log('person2', person2);

  function deepCopy(source, target) {
    for(const attr in source) {
      const item = source[attr];

      if (isObject(item) || isArr(item)) {
        target[attr] = isObject(item) ? {} : [];
        deepCopy(item, target[attr]);
      }else {
        target[attr] = item;
      }
    }
  }

  function isObject(arg) {
    return Object.prototype.toString.call(arg) === '[object Object]';
  }
  function isArr(arg) {
    return Array.isArray(arg) || Object.prototype.toString.call(arg) === '[object Array]';
  }
</script>
</body>
</html>