<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>闭包例子</title>
</head>
<body>
<ul>
  <li>aaaaaa</li>
  <li>bbbbb</li>
  <li>ccccc</li>
  <li>ddddd</li>
  <li>eeeee</li>
</ul>

<!--<script>
  // var a;  循环结束后a被覆盖成了5
  const lis = document.getElementsByTagName('li');
  for (a = 0; a < lis.length; a++) {
    lis[a].addEventListener('click', function () {
      console.log(a); // 全是5
    });
  }
</script>-->

<!--<script>
  const lis = document.getElementsByTagName('li');

  // 因为let声明的变量不会被提升，相当于每次循环都重新let了一个变量
  // 也就是let了5个a, 存在每次循环中
  for (let a = 0; a < lis.length; a++) {
    lis[a].addEventListener('click', function () {
      console.log(a); // 正常
    });
  }
</script>-->


<!--<script>
  const lis = document.getElementsByTagName('li');
  for (a = 0; a < lis.length; a++) {
    (function (i) {
      lis[i].addEventListener('click', function () {
        console.log(i); // 正常
      })
    })(a);
  }
</script>-->



<script>
  // var a;  循环结束后a被覆盖成了5
  const lis = document.getElementsByTagName('li');
  for (a = 0; a < lis.length; a++) {
    lis[a].index = a;
    lis[a].addEventListener('click', function () {
      console.log(this.index); // 正常
    });
  }
</script>
</body>
</html>