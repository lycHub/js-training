> 改变函数内this指向的常用方法: call | apply | bind

**一、call与apply**
```javascript
  const obj = { name: '张三' };
  function fn() {
    console.log(this);
  }
 fn();  // 直接调用，this指向window
```

先用call和apply将fn中的this指向obj
```javascript
   const obj = { name: '张三' };
  function fn() {
    console.log(this);      // obj
    console.log(this.name); // 张三
  }
 fn.call(obj);
 fn.apply(obj);
```

call和apply基本用法一样，区别在于传参


```javascript
  const obj = { name: '张三' };
  function fn(pre) {
    console.log(pre + '||' + this.name);
  }
 fn.call(obj, 'call');      // call||张三
 fn.apply(obj, ['apply']);  // apply||张三
```
**apply把参数都放在数组里**

&nbsp;
&nbsp;
&nbsp;


**二、bind**
如果说call和apply是调用的同时改变this指向，那么bind就是先改变this指向，再调用
```javascript
  const obj = { name: '张三' };
  function fn(pre) {
    console.log(pre + '||' + this.name);
  }
  fn.bind(obj, 'bind')(); // bind||张三
```
fn.bind(obj, 'bind')()可以拆成两个来看：
```javascript
const f = fn.bind(obj, 'bind');
f();
```

&nbsp;
&nbsp;
&nbsp;

**三、经典应用，toString精确判断变量类型**
```javascript
  const arr = [2, 5];
  console.log(arr.toString()); // '2,5'
```
普通数组调用toString会把数组成员变成字符串


```javascript
  const obj = { name: 'aaa' };
  console.log(obj.toString());  // '[object Object]'
```
普通对象调用toString输出'[object object]'，**注意是个字符串**。
很明显上述两种toString完全是两个不通的方法，利用Object的这个toString, 可以精确的判断变量类型，只需要在调用toString方法时，将内部this指向对应变量即可：
```javascript
 const arr = [2, 5];
 console.log(arr.toString()); // '2,5'
 console.log(Object.prototype.toString.call(arr)); // '[object Array]'
```

所以判断某变量是否是数组可以写成这样：
```javascript
  function isArray(arg) {
   if (Array.isArray) {
     return Array.isArray(arg);
   }else{
     return Object.prototype.toString.call(arg) === '[object Array]';
   }
 }
```